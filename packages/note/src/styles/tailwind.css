/* https://github.com/saadeghi/daisyui/issues/4209#issuecomment-3512250505 */
@layer theme, base, components, utilities.daisyui.component;
@import "tailwindcss";
@import "./daisyui.css";
@import "./dictionary.css";
@import "./tailwindProperty.css";
@import "./configurable.css";

/* biome-ignore format: this looks nicer */
@theme {
  --animate-fade-in: fade-in 400ms cubic-bezier(0.16, 1, 0.3, 1) forwards;
  --animate-fade-in-sm: fade-in-sm 300ms cubic-bezier(0.16, 1, 0.3, 1) forwards;
  @keyframes fade-in {
    from { opacity: 0; transform: translateY(4px); }
    to { opacity: 1; transform: translateY(0); }
  }
  @keyframes fade-in-sm {
    from { opacity: 0; transform: translateY(2px); }
    to { opacity: 1; transform: translateY(0); }
  }
}

@custom-variant hover (&:hover);

@utility gutter-stable {
  scrollbar-gutter: stable;
}

@layer utilities {
  .pitch-segment {
    position: relative;
  }
  .pitch-segment::after {
    content: "";
    position: absolute;
    top: 0;
    right: 0;
    width: 2px;
    height: 8px;
  }

  [data-is-even="true"] .pitch-segment::after {
    background-color: var(--color-primary); /* match text/border color */
  }
  [data-is-even="false"] .pitch-segment::after {
    background-color: var(--color-secondary); /* match text/border color */
  }

  .picture-field-background {
    @apply [&_*:not(img)]:contents;
    @apply [&_img]:absolute [&_img]:size-full [&_img]:object-cover [&_img]:object-center;
    @apply [&_img]:scale-110 [&_img]:filter [&_img]:brightness-50 [&_img]:blur-[16px];
    @apply [&_:not(:first-child)]:hidden;
  }

  .picture-field {
    @apply [&_*:not(img)]:contents;
    @apply relative h-full cursor-pointer;
    @apply [&_img]:h-48 sm:[&_img]:h-full [&_img]:object-contain [&_img]:mx-auto;
    @apply [&_img]:hover:filter-none;
    &[data-nsfw="true"],
    &[data-tags~="nsfw"],
    &[data-tags~="NSFW"],
    &[data-tags~="Nsfw"] {
      @apply [&_img]:filter [&_img]:blur-[16px] [&_img]:brightness-50;
    }
    &[data-transition="true"] {
      @apply [&_img]:transition-[filter];
    }
    @apply [&_:not(:first-child)]:hidden;
  }

  .picture-field:hover {
    @apply [&_img]:filter-none;
  }

  .picture-modal {
    @apply absolute z-20 top-0 left-0 w-full h-full p-4 sm:p-8 bg-black/75 flex justify-center items-center [&_*:not(img)]:contents transition-opacity;
    &[data-modal-hidden="true"] {
      @apply hidden;
    }
    &[data-modal-transparent="true"] {
      @apply opacity-0;
    }
    @apply [&_:not(:first-child)]:hidden;
  }

  .flex-if-x-card {
    &[data-is-audio-card="ready"],
    &[data-is-sentence-card]:not([data-is-sentence-card=""]),
    &[data-is-word-and-sentence-card]:not([data-is-word-and-sentence-card=""]) {
      @apply flex;
    }
    &[data-is-click-card][data-clicked="true"]:not(
        [data-is-click-card=""][data-clicked="true"]
      ) {
      @apply flex;
    }
  }

  .pitch-field {
    @apply hidden;
    &[data-has-pitch="true"] {
      @apply flex;
    }
  }

  .hint-field {
    @apply hidden;
    &[data-has-hint="true"] {
      @apply flex;
    }
  }
}

@font-face {
  font-family: "Hina Mincho";
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: url("_kiku_font_hina-mincho.woff2") format("woff2");
}

@font-face {
  font-family: "Klee One";
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: url("_kiku_font_klee-one.woff2") format("woff2");
}

@font-face {
  font-family: "IBM Plex Sans JP";
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: url("_kiku_font_ibm-plex-sans-jp.woff2") format("woff2");
}

:root {
  font-size: 16px;
}

body {
  margin: 0rem;
  background: var(--color-base-100);
}

*::-webkit-scrollbar {
  background-color: var(--color-base-200) !important;
}

*::-webkit-scrollbar-thumb {
  background-color: var(--color-base-content-subtle-100) !important;
}

[data-kiku-root] {
  position: relative;
  overflow: hidden;
}

/* AnkiDroid */
.android body > div#content {
  margin: 0;
}
